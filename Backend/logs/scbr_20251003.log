2025-10-03 21:23:00 - s_cbr.SearchEngine - INFO - [SearchEngine] Connected to Weaviate
2025-10-03 21:23:00 - s_cbr.SpiralEngine - INFO - ✅ LLM 客戶端初始化成功
2025-10-03 21:23:00 - s_cbr.TextProcessor - WARNING - 詞典路徑無效: 
2025-10-03 21:23:01 - s_cbr.SpiralEngine - INFO - 螺旋推理引擎初始化完成
2025-10-03 21:23:01 - s_cbr.DialogManager - INFO - 對話管理器初始化完成
2025-10-03 21:23:01 - s_cbr.ConvergenceMetrics - INFO - 收斂度計算器初始化完成
2025-10-03 21:23:01 - s_cbr.SCBREngine - INFO - ✅ S-CBR Engine 初始化完成
2025-10-03 21:23:01 - s_cbr.backend.main - INFO - 🚀 TCM S-CBR Backend v2.2 啟動
2025-10-03 21:23:01 - s_cbr.backend.main - INFO - ============================================================
2025-10-03 21:23:01 - s_cbr.backend.main - INFO - 📦 已載入模組:
2025-10-03 21:23:01 - s_cbr.backend.main - INFO -    ✅ S-CBR 螺旋推理引擎
2025-10-03 21:23:01 - s_cbr.backend.main - INFO -    ✅ ANC 病例管理系統
2025-10-03 21:23:01 - s_cbr.backend.main - INFO - 
2025-10-03 21:23:01 - s_cbr.backend.main - INFO - 🔗 可用端點:
2025-10-03 21:23:01 - s_cbr.backend.main - INFO -    - 螺旋推理: /api/scbr/v2/*
2025-10-03 21:23:01 - s_cbr.backend.main - INFO -    - 病例保存: POST /api/case/save
2025-10-03 21:23:01 - s_cbr.backend.main - INFO -    - 病例查詢: GET /api/case/get/{case_id}
2025-10-03 21:23:01 - s_cbr.backend.main - INFO -    - 病例搜索: POST /api/case/search
2025-10-03 21:23:01 - s_cbr.backend.main - INFO -    - 病例統計: GET /api/case/stats
2025-10-03 21:23:01 - s_cbr.backend.main - INFO -    - 健康檢查: GET /healthz
2025-10-03 21:23:01 - s_cbr.backend.main - INFO - ============================================================
2025-10-03 21:23:01 - s_cbr.backend.main - INFO - ✅ ANC 病例處理器初始化成功
2025-10-03 21:24:25 - s_cbr.backend.main - INFO - 🌀 啟動診斷 [相容模式] 問題: 近常常失眠而且多夢，晚上容易驚醒，醫師說我左寸的脈有點遲，白天會心悸口乾，該怎麼辦？
2025-10-03 21:24:25 - s_cbr.SCBREngine - INFO - 🌀 啟動診斷 [SCBR-20251003-212425-4f57147a]
2025-10-03 21:24:25 - s_cbr.SCBREngine - INFO -    問題: 近常常失眠而且多夢，晚上容易驚醒，醫師說我左寸的脈有點遲，白天會心悸口乾，該怎麼辦？...
2025-10-03 21:24:25 - s_cbr.SCBREngine - INFO -    session_id: None
2025-10-03 21:24:25 - s_cbr.SCBREngine - INFO -    continue_spiral: False
2025-10-03 21:24:25 - s_cbr.DialogManager - INFO - 📝 創建會話: 7834978a-ab7f-4d77-bd72-24c7c169a20f
2025-10-03 21:24:25 - s_cbr.DialogManager - INFO -    初始問題: 近常常失眠而且多夢，晚上容易驚醒，醫師說我左寸的脈有點遲，白天會心悸口乾，該怎麼辦？...
2025-10-03 21:24:25 - s_cbr.SCBREngine - INFO - 📝 創建新會話: 7834978a-ab7f-4d77-bd72-24c7c169a20f
2025-10-03 21:24:25 - s_cbr.SCBREngine - INFO - 🔢 當前輪次: 1
2025-10-03 21:24:25 - s_cbr.SpiralEngine - INFO - 🌀 執行第 1 輪螺旋推理
2025-10-03 21:24:25 - s_cbr.SpiralEngine - INFO - 分詞後問題: 近 常常 失眠 而且 多夢 ， 晚上 容易 驚醒 ， 醫師 說 我 左寸 脈 有點 遲 ， 白天 會 心悸 口乾 ， 該 怎麼 辦 ？...
2025-10-03 21:24:27 - s_cbr.SpiralEngine - INFO - 🧭 生成向量: dim=1024
2025-10-03 21:24:27 - s_cbr.SearchEngine - INFO - 🔎 Case HYBRID α=0.5, qdim=1024, fields=['bm25_cjk'], props=['case_id', 'chiefComplaint', 'presentIllness', 'pulse_text', 'search_text']
2025-10-03 21:24:27 - s_cbr.SearchEngine - INFO - 📊 Case 搜索: 10 個結果
2025-10-03 21:24:27 - s_cbr.SearchEngine - INFO - 🔎 PulsePJ HYBRID α=0.5, qdim=1024, fields=['bm25_cjk'], props=['pid', 'name', 'category', 'symptoms', 'main_disease', 'search_text']
2025-10-03 21:24:27 - s_cbr.SearchEngine - INFO - 📊 PulsePJ 搜索: 10 個結果
2025-10-03 21:24:27 - s_cbr.SearchEngine - INFO - 🔎 RPCase HYBRID α=0.5, qdim=1024, fields=['bm25_text'], props=['final_diagnosis', 'pulse_tags', 'symptom_tags']
2025-10-03 21:24:27 - s_cbr.SearchEngine - INFO - 📊 RPCase 搜索: 0 個結果
2025-10-03 21:24:27 - s_cbr.SpiralEngine - INFO - 📊 檢索結果 - Case: 10, PulsePJ: 10, RPCase: 0
2025-10-03 21:24:28 - s_cbr.ConvergenceMetrics - INFO - 📈 會話 7834978a-ab7f-4d77-bd72-24c7c169a20f 收斂度: 0.433
2025-10-03 21:24:28 - s_cbr.DialogManager - INFO - 📊 記錄第 1 輪結果到會話 7834978a-ab7f-4d77-bd72-24c7c169a20f
2025-10-03 21:24:28 - s_cbr.SCBREngine - INFO - ✅ 診斷完成 [SCBR-20251003-212425-4f57147a] 耗時: 3.34s
2025-10-03 21:24:28 - s_cbr.SCBREngine - INFO -    輪次: 1, 可繼續: True
2025-10-03 22:26:38 - s_cbr.SearchEngine - INFO - [SearchEngine] Connected to Weaviate
2025-10-03 22:26:38 - s_cbr.SpiralEngine - INFO - ✅ LLM 客戶端初始化成功
2025-10-03 22:26:38 - s_cbr.TextProcessor - WARNING - 詞典路徑無效: 
2025-10-03 22:26:39 - s_cbr.SpiralEngine - INFO - 螺旋推理引擎初始化完成
2025-10-03 22:26:39 - s_cbr.DialogManager - INFO - 對話管理器初始化完成
2025-10-03 22:26:39 - s_cbr.ConvergenceMetrics - INFO - 收斂度計算器初始化完成
2025-10-03 22:26:39 - s_cbr.SCBREngine - INFO - ✅ S-CBR Engine 初始化完成
2025-10-03 22:26:39 - s_cbr.backend.main - INFO - 🚀 TCM S-CBR Backend v2.2 啟動
2025-10-03 22:26:39 - s_cbr.backend.main - INFO - ============================================================
2025-10-03 22:26:39 - s_cbr.backend.main - INFO - 📦 已載入模組:
2025-10-03 22:26:39 - s_cbr.backend.main - INFO -    ✅ S-CBR 螺旋推理引擎
2025-10-03 22:26:39 - s_cbr.backend.main - INFO -    ✅ ANC 病例管理系統
2025-10-03 22:26:39 - s_cbr.backend.main - INFO - 
2025-10-03 22:26:39 - s_cbr.backend.main - INFO - 🔗 可用端點:
2025-10-03 22:26:39 - s_cbr.backend.main - INFO -    - 螺旋推理: /api/scbr/v2/*
2025-10-03 22:26:39 - s_cbr.backend.main - INFO -    - 病例保存: POST /api/case/save
2025-10-03 22:26:39 - s_cbr.backend.main - INFO -    - 病例查詢: GET /api/case/get/{case_id}
2025-10-03 22:26:39 - s_cbr.backend.main - INFO -    - 病例搜索: POST /api/case/search
2025-10-03 22:26:39 - s_cbr.backend.main - INFO -    - 病例統計: GET /api/case/stats
2025-10-03 22:26:39 - s_cbr.backend.main - INFO -    - 健康檢查: GET /healthz
2025-10-03 22:26:39 - s_cbr.backend.main - INFO - ============================================================
2025-10-03 22:26:39 - s_cbr.backend.main - INFO - ✅ ANC 病例處理器初始化成功
2025-10-03 22:43:35 - s_cbr.SearchEngine - INFO - [SearchEngine] Connected to Weaviate
2025-10-03 22:43:35 - s_cbr.SpiralEngine - INFO - ✅ LLM 客戶端初始化成功
2025-10-03 22:43:35 - s_cbr.TextProcessor - WARNING - 詞典路徑無效: 
2025-10-03 22:43:36 - s_cbr.SpiralEngine - INFO - 螺旋推理引擎初始化完成
2025-10-03 22:43:36 - s_cbr.DialogManager - INFO - 對話管理器初始化完成
2025-10-03 22:43:36 - s_cbr.ConvergenceMetrics - INFO - 收斂度計算器初始化完成
2025-10-03 22:43:36 - s_cbr.SCBREngine - INFO - ✅ S-CBR Engine 初始化完成
2025-10-03 22:43:36 - s_cbr.backend.main - INFO - 🚀 TCM S-CBR Backend v2.2 啟動
2025-10-03 22:43:36 - s_cbr.backend.main - INFO - ============================================================
2025-10-03 22:43:36 - s_cbr.backend.main - INFO - 📦 已載入模組:
2025-10-03 22:43:36 - s_cbr.backend.main - INFO -    ✅ S-CBR 螺旋推理引擎
2025-10-03 22:43:36 - s_cbr.backend.main - INFO -    ✅ ANC 病例管理系統
2025-10-03 22:43:36 - s_cbr.backend.main - INFO - 
2025-10-03 22:43:36 - s_cbr.backend.main - INFO - 🔗 可用端點:
2025-10-03 22:43:36 - s_cbr.backend.main - INFO -    - 螺旋推理: /api/scbr/v2/*
2025-10-03 22:43:36 - s_cbr.backend.main - INFO -    - 病例保存: POST /api/case/save
2025-10-03 22:43:36 - s_cbr.backend.main - INFO -    - 病例查詢: GET /api/case/get/{case_id}
2025-10-03 22:43:36 - s_cbr.backend.main - INFO -    - 病例搜索: POST /api/case/search
2025-10-03 22:43:36 - s_cbr.backend.main - INFO -    - 病例統計: GET /api/case/stats
2025-10-03 22:43:36 - s_cbr.backend.main - INFO -    - 健康檢查: GET /healthz
2025-10-03 22:43:36 - s_cbr.backend.main - INFO - ============================================================
2025-10-03 22:43:36 - s_cbr.backend.main - INFO - ✅ ANC 病例處理器初始化成功
2025-10-03 22:43:40 - s_cbr.SearchEngine - INFO - [SearchEngine] Connected to Weaviate
2025-10-03 22:43:40 - s_cbr.SpiralEngine - INFO - ✅ LLM 客戶端初始化成功
2025-10-03 22:43:40 - s_cbr.TextProcessor - WARNING - 詞典路徑無效: 
2025-10-03 22:43:41 - s_cbr.SpiralEngine - INFO - 螺旋推理引擎初始化完成
2025-10-03 22:43:41 - s_cbr.DialogManager - INFO - 對話管理器初始化完成
2025-10-03 22:43:41 - s_cbr.ConvergenceMetrics - INFO - 收斂度計算器初始化完成
2025-10-03 22:43:41 - s_cbr.SCBREngine - INFO - ✅ S-CBR Engine 初始化完成
2025-10-03 22:43:41 - s_cbr.backend.main - INFO - 🚀 TCM S-CBR Backend v2.2 啟動
2025-10-03 22:43:41 - s_cbr.backend.main - INFO - ============================================================
2025-10-03 22:43:41 - s_cbr.backend.main - INFO - 📦 已載入模組:
2025-10-03 22:43:41 - s_cbr.backend.main - INFO -    ✅ S-CBR 螺旋推理引擎
2025-10-03 22:43:41 - s_cbr.backend.main - INFO -    ✅ ANC 病例管理系統
2025-10-03 22:43:41 - s_cbr.backend.main - INFO - 
2025-10-03 22:43:41 - s_cbr.backend.main - INFO - 🔗 可用端點:
2025-10-03 22:43:41 - s_cbr.backend.main - INFO -    - 螺旋推理: /api/scbr/v2/*
2025-10-03 22:43:41 - s_cbr.backend.main - INFO -    - 病例保存: POST /api/case/save
2025-10-03 22:43:41 - s_cbr.backend.main - INFO -    - 病例查詢: GET /api/case/get/{case_id}
2025-10-03 22:43:41 - s_cbr.backend.main - INFO -    - 病例搜索: POST /api/case/search
2025-10-03 22:43:41 - s_cbr.backend.main - INFO -    - 病例統計: GET /api/case/stats
2025-10-03 22:43:41 - s_cbr.backend.main - INFO -    - 健康檢查: GET /healthz
2025-10-03 22:43:41 - s_cbr.backend.main - INFO - ============================================================
2025-10-03 22:43:41 - s_cbr.backend.main - INFO - ✅ ANC 病例處理器初始化成功
2025-10-03 22:43:46 - s_cbr.SearchEngine - INFO - [SearchEngine] Connected to Weaviate
2025-10-03 22:43:46 - s_cbr.SpiralEngine - INFO - ✅ LLM 客戶端初始化成功
2025-10-03 22:43:46 - s_cbr.TextProcessor - WARNING - 詞典路徑無效: 
2025-10-03 22:43:47 - s_cbr.SpiralEngine - INFO - 螺旋推理引擎初始化完成
2025-10-03 22:43:47 - s_cbr.DialogManager - INFO - 對話管理器初始化完成
2025-10-03 22:43:47 - s_cbr.ConvergenceMetrics - INFO - 收斂度計算器初始化完成
2025-10-03 22:43:47 - s_cbr.SCBREngine - INFO - ✅ S-CBR Engine 初始化完成
2025-10-03 22:43:47 - s_cbr.backend.main - INFO - 🚀 TCM S-CBR Backend v2.2 啟動
2025-10-03 22:43:47 - s_cbr.backend.main - INFO - ============================================================
2025-10-03 22:43:47 - s_cbr.backend.main - INFO - 📦 已載入模組:
2025-10-03 22:43:47 - s_cbr.backend.main - INFO -    ✅ S-CBR 螺旋推理引擎
2025-10-03 22:43:47 - s_cbr.backend.main - INFO -    ✅ ANC 病例管理系統
2025-10-03 22:43:47 - s_cbr.backend.main - INFO - 
2025-10-03 22:43:47 - s_cbr.backend.main - INFO - 🔗 可用端點:
2025-10-03 22:43:47 - s_cbr.backend.main - INFO -    - 螺旋推理: /api/scbr/v2/*
2025-10-03 22:43:47 - s_cbr.backend.main - INFO -    - 病例保存: POST /api/case/save
2025-10-03 22:43:47 - s_cbr.backend.main - INFO -    - 病例查詢: GET /api/case/get/{case_id}
2025-10-03 22:43:47 - s_cbr.backend.main - INFO -    - 病例搜索: POST /api/case/search
2025-10-03 22:43:47 - s_cbr.backend.main - INFO -    - 病例統計: GET /api/case/stats
2025-10-03 22:43:47 - s_cbr.backend.main - INFO -    - 健康檢查: GET /healthz
2025-10-03 22:43:47 - s_cbr.backend.main - INFO - ============================================================
2025-10-03 22:43:47 - s_cbr.backend.main - INFO - ✅ ANC 病例處理器初始化成功
2025-10-03 22:43:59 - s_cbr.SearchEngine - INFO - [SearchEngine] Connected to Weaviate
2025-10-03 22:43:59 - s_cbr.SpiralEngine - INFO - ✅ LLM 客戶端初始化成功
2025-10-03 22:43:59 - s_cbr.TextProcessor - WARNING - 詞典路徑無效: 
2025-10-03 22:44:00 - s_cbr.SpiralEngine - INFO - 螺旋推理引擎初始化完成
2025-10-03 22:44:00 - s_cbr.DialogManager - INFO - 對話管理器初始化完成
2025-10-03 22:44:00 - s_cbr.ConvergenceMetrics - INFO - 收斂度計算器初始化完成
2025-10-03 22:44:00 - s_cbr.SCBREngine - INFO - ✅ S-CBR Engine 初始化完成
2025-10-03 22:44:00 - s_cbr.backend.main - INFO - 🚀 TCM S-CBR Backend v2.2 啟動
2025-10-03 22:44:00 - s_cbr.backend.main - INFO - ============================================================
2025-10-03 22:44:00 - s_cbr.backend.main - INFO - 📦 已載入模組:
2025-10-03 22:44:00 - s_cbr.backend.main - INFO -    ✅ S-CBR 螺旋推理引擎
2025-10-03 22:44:00 - s_cbr.backend.main - INFO -    ✅ ANC 病例管理系統
2025-10-03 22:44:00 - s_cbr.backend.main - INFO - 
2025-10-03 22:44:00 - s_cbr.backend.main - INFO - 🔗 可用端點:
2025-10-03 22:44:00 - s_cbr.backend.main - INFO -    - 螺旋推理: /api/scbr/v2/*
2025-10-03 22:44:00 - s_cbr.backend.main - INFO -    - 病例保存: POST /api/case/save
2025-10-03 22:44:00 - s_cbr.backend.main - INFO -    - 病例查詢: GET /api/case/get/{case_id}
2025-10-03 22:44:00 - s_cbr.backend.main - INFO -    - 病例搜索: POST /api/case/search
2025-10-03 22:44:00 - s_cbr.backend.main - INFO -    - 病例統計: GET /api/case/stats
2025-10-03 22:44:00 - s_cbr.backend.main - INFO -    - 健康檢查: GET /healthz
2025-10-03 22:44:00 - s_cbr.backend.main - INFO - ============================================================
2025-10-03 22:44:01 - httpx - INFO - HTTP Request: GET http://localhost:8080/v1/.well-known/openid-configuration "HTTP/1.1 404 Not Found"
2025-10-03 22:44:02 - httpx - INFO - HTTP Request: GET http://localhost:8080/v1/meta "HTTP/1.1 401 Unauthorized"
2025-10-03 22:44:02 - s_cbr.backend.main - INFO - ✅ ANC 病例處理器初始化成功
2025-10-03 22:44:43 - s_cbr.SearchEngine - INFO - [SearchEngine] Connected to Weaviate
2025-10-03 22:44:43 - s_cbr.SpiralEngine - INFO - ✅ LLM 客戶端初始化成功
2025-10-03 22:44:43 - s_cbr.TextProcessor - WARNING - 詞典路徑無效: 
2025-10-03 22:44:44 - s_cbr.SpiralEngine - INFO - 螺旋推理引擎初始化完成
2025-10-03 22:44:44 - s_cbr.DialogManager - INFO - 對話管理器初始化完成
2025-10-03 22:44:44 - s_cbr.ConvergenceMetrics - INFO - 收斂度計算器初始化完成
2025-10-03 22:44:44 - s_cbr.SCBREngine - INFO - ✅ S-CBR Engine 初始化完成
2025-10-03 22:44:44 - s_cbr.backend.main - INFO - 🚀 TCM S-CBR Backend v2.2 啟動
2025-10-03 22:44:44 - s_cbr.backend.main - INFO - ============================================================
2025-10-03 22:44:44 - s_cbr.backend.main - INFO - 📦 已載入模組:
2025-10-03 22:44:44 - s_cbr.backend.main - INFO -    ✅ S-CBR 螺旋推理引擎
2025-10-03 22:44:44 - s_cbr.backend.main - INFO -    ✅ ANC 病例管理系統
2025-10-03 22:44:44 - s_cbr.backend.main - INFO - 
2025-10-03 22:44:44 - s_cbr.backend.main - INFO - 🔗 可用端點:
2025-10-03 22:44:44 - s_cbr.backend.main - INFO -    - 螺旋推理: /api/scbr/v2/*
2025-10-03 22:44:44 - s_cbr.backend.main - INFO -    - 病例保存: POST /api/case/save
2025-10-03 22:44:44 - s_cbr.backend.main - INFO -    - 病例查詢: GET /api/case/get/{case_id}
2025-10-03 22:44:44 - s_cbr.backend.main - INFO -    - 病例搜索: POST /api/case/search
2025-10-03 22:44:44 - s_cbr.backend.main - INFO -    - 病例統計: GET /api/case/stats
2025-10-03 22:44:44 - s_cbr.backend.main - INFO -    - 健康檢查: GET /healthz
2025-10-03 22:44:44 - s_cbr.backend.main - INFO - ============================================================
2025-10-03 22:44:45 - httpx - INFO - HTTP Request: GET http://localhost:8080/v1/.well-known/openid-configuration "HTTP/1.1 404 Not Found"
2025-10-03 22:44:46 - httpx - INFO - HTTP Request: GET http://localhost:8080/v1/meta "HTTP/1.1 401 Unauthorized"
2025-10-03 22:44:46 - s_cbr.backend.main - INFO - ✅ ANC 病例處理器初始化成功
2025-10-03 22:45:59 - s_cbr.SearchEngine - INFO - [SearchEngine] Connected to Weaviate
2025-10-03 22:45:59 - s_cbr.SpiralEngine - INFO - ✅ LLM 客戶端初始化成功
2025-10-03 22:45:59 - s_cbr.TextProcessor - WARNING - 詞典路徑無效: 
2025-10-03 22:46:00 - s_cbr.SpiralEngine - INFO - 螺旋推理引擎初始化完成
2025-10-03 22:46:00 - s_cbr.DialogManager - INFO - 對話管理器初始化完成
2025-10-03 22:46:00 - s_cbr.ConvergenceMetrics - INFO - 收斂度計算器初始化完成
2025-10-03 22:46:00 - s_cbr.SCBREngine - INFO - ✅ S-CBR Engine 初始化完成
2025-10-03 22:46:00 - s_cbr.backend.main - INFO - 🚀 TCM S-CBR Backend v2.2 啟動
2025-10-03 22:46:00 - s_cbr.backend.main - INFO - ============================================================
2025-10-03 22:46:00 - s_cbr.backend.main - INFO - 📦 已載入模組:
2025-10-03 22:46:00 - s_cbr.backend.main - INFO -    ✅ S-CBR 螺旋推理引擎
2025-10-03 22:46:00 - s_cbr.backend.main - INFO -    ✅ ANC 病例管理系統
2025-10-03 22:46:00 - s_cbr.backend.main - INFO - 
2025-10-03 22:46:00 - s_cbr.backend.main - INFO - 🔗 可用端點:
2025-10-03 22:46:00 - s_cbr.backend.main - INFO -    - 螺旋推理: /api/scbr/v2/*
2025-10-03 22:46:00 - s_cbr.backend.main - INFO -    - 病例保存: POST /api/case/save
2025-10-03 22:46:00 - s_cbr.backend.main - INFO -    - 病例查詢: GET /api/case/get/{case_id}
2025-10-03 22:46:00 - s_cbr.backend.main - INFO -    - 病例搜索: POST /api/case/search
2025-10-03 22:46:00 - s_cbr.backend.main - INFO -    - 病例統計: GET /api/case/stats
2025-10-03 22:46:00 - s_cbr.backend.main - INFO -    - 健康檢查: GET /healthz
2025-10-03 22:46:00 - s_cbr.backend.main - INFO - ============================================================
2025-10-03 22:46:01 - httpx - INFO - HTTP Request: GET http://localhost:8080/v1/.well-known/openid-configuration "HTTP/1.1 404 Not Found"
2025-10-03 22:46:01 - httpx - INFO - HTTP Request: GET http://localhost:8080/v1/meta "HTTP/1.1 401 Unauthorized"
2025-10-03 22:46:01 - s_cbr.backend.main - INFO - ✅ ANC 病例處理器初始化成功
2025-10-03 22:46:40 - s_cbr.SearchEngine - INFO - [SearchEngine] Connected to Weaviate
2025-10-03 22:46:40 - s_cbr.SpiralEngine - INFO - ✅ LLM 客戶端初始化成功
2025-10-03 22:46:40 - s_cbr.TextProcessor - WARNING - 詞典路徑無效: 
2025-10-03 22:46:40 - s_cbr.SpiralEngine - INFO - 螺旋推理引擎初始化完成
2025-10-03 22:46:40 - s_cbr.DialogManager - INFO - 對話管理器初始化完成
2025-10-03 22:46:40 - s_cbr.ConvergenceMetrics - INFO - 收斂度計算器初始化完成
2025-10-03 22:46:40 - s_cbr.SCBREngine - INFO - ✅ S-CBR Engine 初始化完成
2025-10-03 22:46:41 - s_cbr.backend.main - INFO - 🚀 TCM S-CBR Backend v2.2 啟動
2025-10-03 22:46:41 - s_cbr.backend.main - INFO - ============================================================
2025-10-03 22:46:41 - s_cbr.backend.main - INFO - 📦 已載入模組:
2025-10-03 22:46:41 - s_cbr.backend.main - INFO -    ✅ S-CBR 螺旋推理引擎
2025-10-03 22:46:41 - s_cbr.backend.main - INFO -    ✅ ANC 病例管理系統
2025-10-03 22:46:41 - s_cbr.backend.main - INFO - 
2025-10-03 22:46:41 - s_cbr.backend.main - INFO - 🔗 可用端點:
2025-10-03 22:46:41 - s_cbr.backend.main - INFO -    - 螺旋推理: /api/scbr/v2/*
2025-10-03 22:46:41 - s_cbr.backend.main - INFO -    - 病例保存: POST /api/case/save
2025-10-03 22:46:41 - s_cbr.backend.main - INFO -    - 病例查詢: GET /api/case/get/{case_id}
2025-10-03 22:46:41 - s_cbr.backend.main - INFO -    - 病例搜索: POST /api/case/search
2025-10-03 22:46:41 - s_cbr.backend.main - INFO -    - 病例統計: GET /api/case/stats
2025-10-03 22:46:41 - s_cbr.backend.main - INFO -    - 健康檢查: GET /healthz
2025-10-03 22:46:41 - s_cbr.backend.main - INFO - ============================================================
2025-10-03 22:46:41 - httpx - INFO - HTTP Request: GET http://localhost:8080/v1/.well-known/openid-configuration "HTTP/1.1 404 Not Found"
2025-10-03 22:46:42 - httpx - INFO - HTTP Request: GET http://localhost:8080/v1/meta "HTTP/1.1 401 Unauthorized"
2025-10-03 22:46:42 - s_cbr.backend.main - INFO - ✅ ANC 病例處理器初始化成功
2025-10-03 22:49:50 - s_cbr.SearchEngine - INFO - [SearchEngine] Connected to Weaviate
2025-10-03 22:49:50 - s_cbr.SpiralEngine - INFO - ✅ LLM 客戶端初始化成功
2025-10-03 22:49:50 - s_cbr.TextProcessor - WARNING - 詞典路徑無效: 
2025-10-03 22:49:51 - s_cbr.SpiralEngine - INFO - 螺旋推理引擎初始化完成
2025-10-03 22:49:51 - s_cbr.DialogManager - INFO - 對話管理器初始化完成
2025-10-03 22:49:51 - s_cbr.ConvergenceMetrics - INFO - 收斂度計算器初始化完成
2025-10-03 22:49:51 - s_cbr.SCBREngine - INFO - ✅ S-CBR Engine 初始化完成
2025-10-03 22:49:51 - s_cbr.backend.main - INFO - 🚀 TCM S-CBR Backend v2.2 啟動
2025-10-03 22:49:51 - s_cbr.backend.main - INFO - ============================================================
2025-10-03 22:49:51 - s_cbr.backend.main - INFO - 📦 已載入模組:
2025-10-03 22:49:51 - s_cbr.backend.main - INFO -    ✅ S-CBR 螺旋推理引擎
2025-10-03 22:49:51 - s_cbr.backend.main - INFO -    ✅ ANC 病例管理系統
2025-10-03 22:49:51 - s_cbr.backend.main - INFO - 
2025-10-03 22:49:51 - s_cbr.backend.main - INFO - 🔗 可用端點:
2025-10-03 22:49:51 - s_cbr.backend.main - INFO -    - 螺旋推理: /api/scbr/v2/*
2025-10-03 22:49:51 - s_cbr.backend.main - INFO -    - 病例保存: POST /api/case/save
2025-10-03 22:49:51 - s_cbr.backend.main - INFO -    - 病例查詢: GET /api/case/get/{case_id}
2025-10-03 22:49:51 - s_cbr.backend.main - INFO -    - 病例搜索: POST /api/case/search
2025-10-03 22:49:51 - s_cbr.backend.main - INFO -    - 病例統計: GET /api/case/stats
2025-10-03 22:49:51 - s_cbr.backend.main - INFO -    - 健康檢查: GET /healthz
2025-10-03 22:49:51 - s_cbr.backend.main - INFO - ============================================================
2025-10-03 22:49:52 - httpx - INFO - HTTP Request: GET http://localhost:8080/v1/meta "HTTP/1.1 200 OK"
2025-10-03 22:49:53 - httpx - INFO - HTTP Request: GET https://pypi.org/pypi/weaviate-client/json "HTTP/1.1 200 OK"
2025-10-03 22:49:53 - httpx - INFO - HTTP Request: GET http://localhost:8080/v1/schema/TCMCase "HTTP/1.1 404 Not Found"
2025-10-03 22:49:53 - s_cbr.backend.main - INFO - ✅ ANC 病例處理器初始化成功
2025-10-03 22:54:02 - s_cbr.SearchEngine - INFO - [SearchEngine] Connected to Weaviate
2025-10-03 22:54:02 - s_cbr.SpiralEngine - INFO - ✅ LLM 客戶端初始化成功
2025-10-03 22:54:02 - s_cbr.TextProcessor - WARNING - 詞典路徑無效: 
2025-10-03 22:54:03 - s_cbr.SpiralEngine - INFO - 螺旋推理引擎初始化完成
2025-10-03 22:54:03 - s_cbr.DialogManager - INFO - 對話管理器初始化完成
2025-10-03 22:54:03 - s_cbr.ConvergenceMetrics - INFO - 收斂度計算器初始化完成
2025-10-03 22:54:03 - s_cbr.SCBREngine - INFO - ✅ S-CBR Engine 初始化完成
2025-10-03 22:54:03 - s_cbr.backend.main - INFO - 🚀 TCM S-CBR Backend v2.2 啟動
2025-10-03 22:54:03 - s_cbr.backend.main - INFO - ============================================================
2025-10-03 22:54:03 - s_cbr.backend.main - INFO - 📦 已載入模組:
2025-10-03 22:54:03 - s_cbr.backend.main - INFO -    ✅ S-CBR 螺旋推理引擎
2025-10-03 22:54:03 - s_cbr.backend.main - INFO -    ✅ ANC 病例管理系統
2025-10-03 22:54:03 - s_cbr.backend.main - INFO - 
2025-10-03 22:54:03 - s_cbr.backend.main - INFO - 🔗 可用端點:
2025-10-03 22:54:03 - s_cbr.backend.main - INFO -    - 螺旋推理: /api/scbr/v2/*
2025-10-03 22:54:03 - s_cbr.backend.main - INFO -    - 病例保存: POST /api/case/save
2025-10-03 22:54:03 - s_cbr.backend.main - INFO -    - 病例查詢: GET /api/case/get/{case_id}
2025-10-03 22:54:03 - s_cbr.backend.main - INFO -    - 病例搜索: POST /api/case/search
2025-10-03 22:54:03 - s_cbr.backend.main - INFO -    - 病例統計: GET /api/case/stats
2025-10-03 22:54:03 - s_cbr.backend.main - INFO -    - 健康檢查: GET /healthz
2025-10-03 22:54:03 - s_cbr.backend.main - INFO - ============================================================
2025-10-03 22:54:03 - httpx - INFO - HTTP Request: GET http://localhost:8080/v1/.well-known/openid-configuration "HTTP/1.1 404 Not Found"
2025-10-03 22:54:04 - httpx - INFO - HTTP Request: GET http://localhost:8080/v1/meta "HTTP/1.1 401 Unauthorized"
2025-10-03 22:54:04 - s_cbr.backend.main - INFO - ✅ ANC 病例處理器初始化成功
2025-10-03 22:54:45 - s_cbr.SearchEngine - INFO - [SearchEngine] Connected to Weaviate
2025-10-03 22:54:45 - s_cbr.SpiralEngine - INFO - ✅ LLM 客戶端初始化成功
2025-10-03 22:54:45 - s_cbr.TextProcessor - WARNING - 詞典路徑無效: 
2025-10-03 22:54:46 - s_cbr.SpiralEngine - INFO - 螺旋推理引擎初始化完成
2025-10-03 22:54:46 - s_cbr.DialogManager - INFO - 對話管理器初始化完成
2025-10-03 22:54:46 - s_cbr.ConvergenceMetrics - INFO - 收斂度計算器初始化完成
2025-10-03 22:54:46 - s_cbr.SCBREngine - INFO - ✅ S-CBR Engine 初始化完成
2025-10-03 22:54:46 - s_cbr.backend.main - INFO - 🚀 TCM S-CBR Backend v2.2 啟動
2025-10-03 22:54:46 - s_cbr.backend.main - INFO - ============================================================
2025-10-03 22:54:46 - s_cbr.backend.main - INFO - 📦 已載入模組:
2025-10-03 22:54:46 - s_cbr.backend.main - INFO -    ✅ S-CBR 螺旋推理引擎
2025-10-03 22:54:46 - s_cbr.backend.main - INFO -    ✅ ANC 病例管理系統
2025-10-03 22:54:46 - s_cbr.backend.main - INFO - 
2025-10-03 22:54:46 - s_cbr.backend.main - INFO - 🔗 可用端點:
2025-10-03 22:54:46 - s_cbr.backend.main - INFO -    - 螺旋推理: /api/scbr/v2/*
2025-10-03 22:54:46 - s_cbr.backend.main - INFO -    - 病例保存: POST /api/case/save
2025-10-03 22:54:46 - s_cbr.backend.main - INFO -    - 病例查詢: GET /api/case/get/{case_id}
2025-10-03 22:54:46 - s_cbr.backend.main - INFO -    - 病例搜索: POST /api/case/search
2025-10-03 22:54:46 - s_cbr.backend.main - INFO -    - 病例統計: GET /api/case/stats
2025-10-03 22:54:46 - s_cbr.backend.main - INFO -    - 健康檢查: GET /healthz
2025-10-03 22:54:46 - s_cbr.backend.main - INFO - ============================================================
2025-10-03 22:54:46 - httpx - INFO - HTTP Request: GET http://localhost:8080/v1/.well-known/openid-configuration "HTTP/1.1 404 Not Found"
2025-10-03 22:54:47 - httpx - INFO - HTTP Request: GET http://localhost:8080/v1/meta "HTTP/1.1 401 Unauthorized"
2025-10-03 22:54:47 - s_cbr.backend.main - INFO - ✅ ANC 病例處理器初始化成功
2025-10-03 22:55:27 - s_cbr.SearchEngine - INFO - [SearchEngine] Connected to Weaviate
2025-10-03 22:55:27 - s_cbr.SpiralEngine - INFO - ✅ LLM 客戶端初始化成功
2025-10-03 22:55:27 - s_cbr.TextProcessor - WARNING - 詞典路徑無效: 
2025-10-03 22:55:27 - s_cbr.SpiralEngine - INFO - 螺旋推理引擎初始化完成
2025-10-03 22:55:27 - s_cbr.DialogManager - INFO - 對話管理器初始化完成
2025-10-03 22:55:27 - s_cbr.ConvergenceMetrics - INFO - 收斂度計算器初始化完成
2025-10-03 22:55:27 - s_cbr.SCBREngine - INFO - ✅ S-CBR Engine 初始化完成
2025-10-03 22:55:27 - s_cbr.backend.main - INFO - 🚀 TCM S-CBR Backend v2.2 啟動
2025-10-03 22:55:27 - s_cbr.backend.main - INFO - ============================================================
2025-10-03 22:55:27 - s_cbr.backend.main - INFO - 📦 已載入模組:
2025-10-03 22:55:27 - s_cbr.backend.main - INFO -    ✅ S-CBR 螺旋推理引擎
2025-10-03 22:55:27 - s_cbr.backend.main - INFO -    ✅ ANC 病例管理系統
2025-10-03 22:55:27 - s_cbr.backend.main - INFO - 
2025-10-03 22:55:27 - s_cbr.backend.main - INFO - 🔗 可用端點:
2025-10-03 22:55:27 - s_cbr.backend.main - INFO -    - 螺旋推理: /api/scbr/v2/*
2025-10-03 22:55:27 - s_cbr.backend.main - INFO -    - 病例保存: POST /api/case/save
2025-10-03 22:55:27 - s_cbr.backend.main - INFO -    - 病例查詢: GET /api/case/get/{case_id}
2025-10-03 22:55:27 - s_cbr.backend.main - INFO -    - 病例搜索: POST /api/case/search
2025-10-03 22:55:27 - s_cbr.backend.main - INFO -    - 病例統計: GET /api/case/stats
2025-10-03 22:55:27 - s_cbr.backend.main - INFO -    - 健康檢查: GET /healthz
2025-10-03 22:55:27 - s_cbr.backend.main - INFO - ============================================================
2025-10-03 22:55:28 - httpx - INFO - HTTP Request: GET http://localhost:8080/v1/.well-known/openid-configuration "HTTP/1.1 404 Not Found"
2025-10-03 22:55:29 - httpx - INFO - HTTP Request: GET http://localhost:8080/v1/meta "HTTP/1.1 401 Unauthorized"
2025-10-03 22:55:29 - s_cbr.backend.main - INFO - ✅ ANC 病例處理器初始化成功
2025-10-03 23:02:25 - s_cbr.SearchEngine - INFO - [SearchEngine] Connected to Weaviate
2025-10-03 23:02:25 - s_cbr.SpiralEngine - INFO - ✅ LLM 客戶端初始化成功
2025-10-03 23:02:25 - s_cbr.TextProcessor - WARNING - 詞典路徑無效: 
2025-10-03 23:02:26 - s_cbr.SpiralEngine - INFO - 螺旋推理引擎初始化完成
2025-10-03 23:02:26 - s_cbr.DialogManager - INFO - 對話管理器初始化完成
2025-10-03 23:02:26 - s_cbr.ConvergenceMetrics - INFO - 收斂度計算器初始化完成
2025-10-03 23:02:26 - s_cbr.SCBREngine - INFO - ✅ S-CBR Engine 初始化完成
2025-10-03 23:02:26 - s_cbr.backend.main - INFO - 🚀 TCM S-CBR Backend v2.2 啟動
2025-10-03 23:02:26 - s_cbr.backend.main - INFO - ============================================================
2025-10-03 23:02:26 - s_cbr.backend.main - INFO - 📦 已載入模組:
2025-10-03 23:02:26 - s_cbr.backend.main - INFO -    ✅ S-CBR 螺旋推理引擎
2025-10-03 23:02:26 - s_cbr.backend.main - INFO -    ✅ ANC 病例管理系統
2025-10-03 23:02:26 - s_cbr.backend.main - INFO - 
2025-10-03 23:02:26 - s_cbr.backend.main - INFO - 🔗 可用端點:
2025-10-03 23:02:26 - s_cbr.backend.main - INFO -    - 螺旋推理: /api/scbr/v2/*
2025-10-03 23:02:26 - s_cbr.backend.main - INFO -    - 病例保存: POST /api/case/save
2025-10-03 23:02:26 - s_cbr.backend.main - INFO -    - 病例查詢: GET /api/case/get/{case_id}
2025-10-03 23:02:26 - s_cbr.backend.main - INFO -    - 病例搜索: POST /api/case/search
2025-10-03 23:02:26 - s_cbr.backend.main - INFO -    - 病例統計: GET /api/case/stats
2025-10-03 23:02:26 - s_cbr.backend.main - INFO -    - 健康檢查: GET /healthz
2025-10-03 23:02:26 - s_cbr.backend.main - INFO - ============================================================
2025-10-03 23:02:26 - httpx - INFO - HTTP Request: GET http://localhost:8080/v1/meta "HTTP/1.1 200 OK"
2025-10-03 23:02:27 - httpx - INFO - HTTP Request: GET https://pypi.org/pypi/weaviate-client/json "HTTP/1.1 200 OK"
2025-10-03 23:02:27 - httpx - INFO - HTTP Request: GET http://localhost:8080/v1/schema/TCMCase "HTTP/1.1 404 Not Found"
2025-10-03 23:02:27 - httpx - INFO - HTTP Request: POST http://localhost:8080/v1/schema "HTTP/1.1 200 OK"
2025-10-03 23:02:27 - s_cbr.backend.main - INFO - ✅ ANC 病例處理器初始化成功
2025-10-03 23:26:00 - s_cbr.SearchEngine - INFO - [SearchEngine] Connected to Weaviate
2025-10-03 23:26:00 - s_cbr.SpiralEngine - INFO - ✅ LLM 客戶端初始化成功
2025-10-03 23:26:00 - s_cbr.TextProcessor - WARNING - 詞典路徑無效: 
2025-10-03 23:26:01 - s_cbr.SpiralEngine - INFO - 螺旋推理引擎初始化完成
2025-10-03 23:26:01 - s_cbr.DialogManager - INFO - 對話管理器初始化完成
2025-10-03 23:26:01 - s_cbr.ConvergenceMetrics - INFO - 收斂度計算器初始化完成
2025-10-03 23:26:01 - s_cbr.SCBREngine - INFO - ✅ S-CBR Engine 初始化完成
2025-10-03 23:26:01 - s_cbr.backend.main - INFO - 🚀 TCM S-CBR Backend v2.2 啟動
2025-10-03 23:26:01 - s_cbr.backend.main - INFO - ============================================================
2025-10-03 23:26:01 - s_cbr.backend.main - INFO - 📦 已載入模組:
2025-10-03 23:26:01 - s_cbr.backend.main - INFO -    ✅ S-CBR 螺旋推理引擎
2025-10-03 23:26:01 - s_cbr.backend.main - INFO -    ✅ ANC 病例管理系統
2025-10-03 23:26:01 - s_cbr.backend.main - INFO - 
2025-10-03 23:26:01 - s_cbr.backend.main - INFO - 🔗 可用端點:
2025-10-03 23:26:01 - s_cbr.backend.main - INFO -    - 螺旋推理: /api/scbr/v2/*
2025-10-03 23:26:01 - s_cbr.backend.main - INFO -    - 病例保存: POST /api/case/save
2025-10-03 23:26:01 - s_cbr.backend.main - INFO -    - 病例查詢: GET /api/case/get/{case_id}
2025-10-03 23:26:01 - s_cbr.backend.main - INFO -    - 病例搜索: POST /api/case/search
2025-10-03 23:26:01 - s_cbr.backend.main - INFO -    - 病例統計: GET /api/case/stats
2025-10-03 23:26:01 - s_cbr.backend.main - INFO -    - 健康檢查: GET /healthz
2025-10-03 23:26:01 - s_cbr.backend.main - INFO - ============================================================
2025-10-03 23:26:02 - httpx - INFO - HTTP Request: GET http://localhost:8080/v1/meta "HTTP/1.1 200 OK"
2025-10-03 23:26:03 - httpx - INFO - HTTP Request: GET https://pypi.org/pypi/weaviate-client/json "HTTP/1.1 200 OK"
2025-10-03 23:26:03 - httpx - INFO - HTTP Request: GET http://localhost:8080/v1/schema/TCMCase "HTTP/1.1 200 OK"
2025-10-03 23:26:03 - s_cbr.backend.main - INFO - ✅ ANC 病例處理器初始化成功
2025-10-03 23:26:47 - s_cbr.SearchEngine - INFO - [SearchEngine] Connected to Weaviate
2025-10-03 23:26:47 - s_cbr.SpiralEngine - INFO - ✅ LLM 客戶端初始化成功
2025-10-03 23:26:47 - s_cbr.TextProcessor - WARNING - 詞典路徑無效: 
2025-10-03 23:26:48 - s_cbr.SpiralEngine - INFO - 螺旋推理引擎初始化完成
2025-10-03 23:26:48 - s_cbr.DialogManager - INFO - 對話管理器初始化完成
2025-10-03 23:26:48 - s_cbr.ConvergenceMetrics - INFO - 收斂度計算器初始化完成
2025-10-03 23:26:48 - s_cbr.SCBREngine - INFO - ✅ S-CBR Engine 初始化完成
2025-10-03 23:26:48 - s_cbr.backend.main - INFO - 🚀 TCM S-CBR Backend v2.2 啟動
2025-10-03 23:26:48 - s_cbr.backend.main - INFO - ============================================================
2025-10-03 23:26:48 - s_cbr.backend.main - INFO - 📦 已載入模組:
2025-10-03 23:26:48 - s_cbr.backend.main - INFO -    ✅ S-CBR 螺旋推理引擎
2025-10-03 23:26:48 - s_cbr.backend.main - INFO -    ✅ ANC 病例管理系統
2025-10-03 23:26:48 - s_cbr.backend.main - INFO - 
2025-10-03 23:26:48 - s_cbr.backend.main - INFO - 🔗 可用端點:
2025-10-03 23:26:48 - s_cbr.backend.main - INFO -    - 螺旋推理: /api/scbr/v2/*
2025-10-03 23:26:48 - s_cbr.backend.main - INFO -    - 病例保存: POST /api/case/save
2025-10-03 23:26:48 - s_cbr.backend.main - INFO -    - 病例查詢: GET /api/case/get/{case_id}
2025-10-03 23:26:48 - s_cbr.backend.main - INFO -    - 病例搜索: POST /api/case/search
2025-10-03 23:26:48 - s_cbr.backend.main - INFO -    - 病例統計: GET /api/case/stats
2025-10-03 23:26:48 - s_cbr.backend.main - INFO -    - 健康檢查: GET /healthz
2025-10-03 23:26:48 - s_cbr.backend.main - INFO - ============================================================
2025-10-03 23:26:48 - httpx - INFO - HTTP Request: GET http://localhost:8080/v1/meta "HTTP/1.1 200 OK"
2025-10-03 23:26:49 - httpx - INFO - HTTP Request: GET https://pypi.org/pypi/weaviate-client/json "HTTP/1.1 200 OK"
2025-10-03 23:26:49 - httpx - INFO - HTTP Request: GET http://localhost:8080/v1/schema/TCMCase "HTTP/1.1 200 OK"
2025-10-03 23:26:49 - s_cbr.backend.main - INFO - ✅ ANC 病例處理器初始化成功
2025-10-03 23:31:07 - s_cbr.backend.main - INFO - 🌀 啟動診斷 [相容模式] 問題: 近常常失眠而且多夢，晚上容易驚醒，醫師說我左寸的脈有點遲，白天會心悸口乾，該怎麼辦？
2025-10-03 23:31:07 - s_cbr.SCBREngine - INFO - 🌀 啟動診斷 [SCBR-20251003-233107-97ab2867]
2025-10-03 23:31:07 - s_cbr.SCBREngine - INFO -    問題: 近常常失眠而且多夢，晚上容易驚醒，醫師說我左寸的脈有點遲，白天會心悸口乾，該怎麼辦？...
2025-10-03 23:31:07 - s_cbr.SCBREngine - INFO -    session_id: None
2025-10-03 23:31:07 - s_cbr.SCBREngine - INFO -    continue_spiral: False
2025-10-03 23:31:07 - s_cbr.DialogManager - INFO - 📝 創建會話: ac25358f-73ba-46eb-a6b4-187c2eced1b3
2025-10-03 23:31:07 - s_cbr.DialogManager - INFO -    初始問題: 近常常失眠而且多夢，晚上容易驚醒，醫師說我左寸的脈有點遲，白天會心悸口乾，該怎麼辦？...
2025-10-03 23:31:07 - s_cbr.SCBREngine - INFO - 📝 創建新會話: ac25358f-73ba-46eb-a6b4-187c2eced1b3
2025-10-03 23:31:07 - s_cbr.SCBREngine - INFO - 🔢 當前輪次: 1
2025-10-03 23:31:07 - s_cbr.SpiralEngine - INFO - 🌀 執行第 1 輪螺旋推理
2025-10-03 23:31:07 - s_cbr.SpiralEngine - INFO - 分詞後問題: 近 常常 失眠 而且 多夢 ， 晚上 容易 驚醒 ， 醫師 說 我 左寸 脈 有點 遲 ， 白天 會 心悸 口乾 ， 該 怎麼 辦 ？...
2025-10-03 23:31:08 - s_cbr.SpiralEngine - INFO - 🧭 生成向量: dim=1024
2025-10-03 23:31:08 - s_cbr.SearchEngine - INFO - 🔎 Case HYBRID α=0.5, qdim=1024, fields=['bm25_cjk'], props=['case_id', 'chiefComplaint', 'presentIllness', 'pulse_text', 'search_text']
2025-10-03 23:31:08 - s_cbr.SearchEngine - INFO - 📊 Case 搜索: 10 個結果
2025-10-03 23:31:08 - s_cbr.SearchEngine - INFO - 🔎 PulsePJ HYBRID α=0.5, qdim=1024, fields=['bm25_cjk'], props=['pid', 'name', 'category', 'symptoms', 'main_disease', 'search_text']
2025-10-03 23:31:08 - s_cbr.SearchEngine - INFO - 📊 PulsePJ 搜索: 10 個結果
2025-10-03 23:31:08 - s_cbr.SearchEngine - INFO - 🔎 RPCase HYBRID α=0.5, qdim=1024, fields=['bm25_text'], props=['final_diagnosis', 'pulse_tags', 'symptom_tags']
2025-10-03 23:31:08 - s_cbr.SearchEngine - INFO - 📊 RPCase 搜索: 0 個結果
2025-10-03 23:31:08 - s_cbr.SpiralEngine - INFO - 📊 檢索結果 - Case: 10, PulsePJ: 10, RPCase: 0
2025-10-03 23:31:10 - s_cbr.ConvergenceMetrics - INFO - 📈 會話 ac25358f-73ba-46eb-a6b4-187c2eced1b3 收斂度: 0.433
2025-10-03 23:31:10 - s_cbr.DialogManager - INFO - 📊 記錄第 1 輪結果到會話 ac25358f-73ba-46eb-a6b4-187c2eced1b3
2025-10-03 23:31:10 - s_cbr.SCBREngine - INFO - ✅ 診斷完成 [SCBR-20251003-233107-97ab2867] 耗時: 3.64s
2025-10-03 23:31:10 - s_cbr.SCBREngine - INFO -    輪次: 1, 可繼續: True
2025-10-03 23:40:41 - s_cbr.SearchEngine - INFO - [SearchEngine] Connected to Weaviate
2025-10-03 23:40:41 - s_cbr.SpiralEngine - INFO - ✅ LLM 客戶端初始化成功
2025-10-03 23:40:42 - s_cbr.TextProcessor - INFO - ✅ 載入 jieba 詞典: 302 個詞條
2025-10-03 23:40:42 - s_cbr.SpiralEngine - INFO - 螺旋推理引擎初始化完成
2025-10-03 23:40:42 - s_cbr.DialogManager - INFO - 對話管理器初始化完成
2025-10-03 23:40:42 - s_cbr.ConvergenceMetrics - INFO - 收斂度計算器初始化完成
2025-10-03 23:40:42 - s_cbr.SCBREngine - INFO - ✅ S-CBR Engine 初始化完成
2025-10-03 23:40:42 - s_cbr.backend.main - INFO - 🚀 TCM S-CBR Backend v2.2 啟動
2025-10-03 23:40:42 - s_cbr.backend.main - INFO - ============================================================
2025-10-03 23:40:42 - s_cbr.backend.main - INFO - 📦 已載入模組:
2025-10-03 23:40:42 - s_cbr.backend.main - INFO -    ✅ S-CBR 螺旋推理引擎
2025-10-03 23:40:42 - s_cbr.backend.main - INFO -    ✅ ANC 病例管理系統
2025-10-03 23:40:42 - s_cbr.backend.main - INFO - 
2025-10-03 23:40:42 - s_cbr.backend.main - INFO - 🔗 可用端點:
2025-10-03 23:40:42 - s_cbr.backend.main - INFO -    - 螺旋推理: /api/scbr/v2/*
2025-10-03 23:40:42 - s_cbr.backend.main - INFO -    - 病例保存: POST /api/case/save
2025-10-03 23:40:42 - s_cbr.backend.main - INFO -    - 病例查詢: GET /api/case/get/{case_id}
2025-10-03 23:40:42 - s_cbr.backend.main - INFO -    - 病例搜索: POST /api/case/search
2025-10-03 23:40:42 - s_cbr.backend.main - INFO -    - 病例統計: GET /api/case/stats
2025-10-03 23:40:42 - s_cbr.backend.main - INFO -    - 健康檢查: GET /healthz
2025-10-03 23:40:42 - s_cbr.backend.main - INFO - ============================================================
2025-10-03 23:40:43 - httpx - INFO - HTTP Request: GET http://localhost:8080/v1/meta "HTTP/1.1 200 OK"
2025-10-03 23:40:43 - httpx - INFO - HTTP Request: GET https://pypi.org/pypi/weaviate-client/json "HTTP/1.1 200 OK"
2025-10-03 23:40:43 - httpx - INFO - HTTP Request: GET http://localhost:8080/v1/schema/TCMCase "HTTP/1.1 200 OK"
2025-10-03 23:40:43 - s_cbr.backend.main - INFO - ✅ ANC 病例處理器初始化成功
2025-10-03 23:42:29 - s_cbr.SearchEngine - INFO - [SearchEngine] Connected to Weaviate
2025-10-03 23:42:29 - s_cbr.SpiralEngine - INFO - ✅ LLM 客戶端初始化成功
2025-10-03 23:42:30 - s_cbr.TextProcessor - INFO - ✅ 載入 jieba 詞典: 287 個詞條
2025-10-03 23:42:30 - s_cbr.TextProcessor - INFO -    詞典路徑: C:\work\系統-中醫\Pulse-project\Backend\anc\tcm_jieba_dict.txt
2025-10-03 23:42:30 - s_cbr.SpiralEngine - INFO - 螺旋推理引擎初始化完成
2025-10-03 23:42:30 - s_cbr.DialogManager - INFO - 對話管理器初始化完成
2025-10-03 23:42:30 - s_cbr.ConvergenceMetrics - INFO - 收斂度計算器初始化完成
2025-10-03 23:42:30 - s_cbr.SCBREngine - INFO - ✅ S-CBR Engine 初始化完成
2025-10-03 23:42:30 - s_cbr.backend.main - INFO - 🚀 TCM S-CBR Backend v2.2 啟動
2025-10-03 23:42:30 - s_cbr.backend.main - INFO - ============================================================
2025-10-03 23:42:30 - s_cbr.backend.main - INFO - 📦 已載入模組:
2025-10-03 23:42:30 - s_cbr.backend.main - INFO -    ✅ S-CBR 螺旋推理引擎
2025-10-03 23:42:30 - s_cbr.backend.main - INFO -    ✅ ANC 病例管理系統
2025-10-03 23:42:30 - s_cbr.backend.main - INFO - 
2025-10-03 23:42:30 - s_cbr.backend.main - INFO - 🔗 可用端點:
2025-10-03 23:42:30 - s_cbr.backend.main - INFO -    - 螺旋推理: /api/scbr/v2/*
2025-10-03 23:42:30 - s_cbr.backend.main - INFO -    - 病例保存: POST /api/case/save
2025-10-03 23:42:30 - s_cbr.backend.main - INFO -    - 病例查詢: GET /api/case/get/{case_id}
2025-10-03 23:42:30 - s_cbr.backend.main - INFO -    - 病例搜索: POST /api/case/search
2025-10-03 23:42:30 - s_cbr.backend.main - INFO -    - 病例統計: GET /api/case/stats
2025-10-03 23:42:30 - s_cbr.backend.main - INFO -    - 健康檢查: GET /healthz
2025-10-03 23:42:30 - s_cbr.backend.main - INFO - ============================================================
2025-10-03 23:42:31 - httpx - INFO - HTTP Request: GET http://localhost:8080/v1/meta "HTTP/1.1 200 OK"
2025-10-03 23:42:32 - httpx - INFO - HTTP Request: GET https://pypi.org/pypi/weaviate-client/json "HTTP/1.1 200 OK"
2025-10-03 23:42:32 - httpx - INFO - HTTP Request: GET http://localhost:8080/v1/schema/TCMCase "HTTP/1.1 200 OK"
2025-10-03 23:42:32 - s_cbr.backend.main - INFO - ✅ ANC 病例處理器初始化成功
2025-10-03 23:43:53 - s_cbr.SearchEngine - INFO - [SearchEngine] Connected to Weaviate
2025-10-03 23:43:53 - s_cbr.SpiralEngine - INFO - ✅ LLM 客戶端初始化成功
2025-10-03 23:43:53 - s_cbr.TextProcessor - INFO - ✅ 載入 jieba 詞典: 287 個詞條
2025-10-03 23:43:53 - s_cbr.TextProcessor - INFO -    詞典路徑: C:\work\系統-中醫\Pulse-project\Backend\anc\tcm_jieba_dict.txt
2025-10-03 23:43:53 - s_cbr.SpiralEngine - INFO - 螺旋推理引擎初始化完成
2025-10-03 23:43:53 - s_cbr.DialogManager - INFO - 對話管理器初始化完成
2025-10-03 23:43:53 - s_cbr.ConvergenceMetrics - INFO - 收斂度計算器初始化完成
2025-10-03 23:43:53 - s_cbr.SCBREngine - INFO - ✅ S-CBR Engine 初始化完成
2025-10-03 23:43:54 - s_cbr.backend.main - INFO - 🚀 TCM S-CBR Backend v2.2 啟動
2025-10-03 23:43:54 - s_cbr.backend.main - INFO - ============================================================
2025-10-03 23:43:54 - s_cbr.backend.main - INFO - 📦 已載入模組:
2025-10-03 23:43:54 - s_cbr.backend.main - INFO -    ✅ S-CBR 螺旋推理引擎
2025-10-03 23:43:54 - s_cbr.backend.main - INFO -    ✅ ANC 病例管理系統
2025-10-03 23:43:54 - s_cbr.backend.main - INFO - 
2025-10-03 23:43:54 - s_cbr.backend.main - INFO - 🔗 可用端點:
2025-10-03 23:43:54 - s_cbr.backend.main - INFO -    - 螺旋推理: /api/scbr/v2/*
2025-10-03 23:43:54 - s_cbr.backend.main - INFO -    - 病例保存: POST /api/case/save
2025-10-03 23:43:54 - s_cbr.backend.main - INFO -    - 病例查詢: GET /api/case/get/{case_id}
2025-10-03 23:43:54 - s_cbr.backend.main - INFO -    - 病例搜索: POST /api/case/search
2025-10-03 23:43:54 - s_cbr.backend.main - INFO -    - 病例統計: GET /api/case/stats
2025-10-03 23:43:54 - s_cbr.backend.main - INFO -    - 健康檢查: GET /healthz
2025-10-03 23:43:54 - s_cbr.backend.main - INFO - ============================================================
2025-10-03 23:43:54 - httpx - INFO - HTTP Request: GET http://localhost:8080/v1/meta "HTTP/1.1 200 OK"
2025-10-03 23:43:55 - httpx - INFO - HTTP Request: GET https://pypi.org/pypi/weaviate-client/json "HTTP/1.1 200 OK"
2025-10-03 23:43:55 - httpx - INFO - HTTP Request: GET http://localhost:8080/v1/schema/TCMCase "HTTP/1.1 200 OK"
2025-10-03 23:43:55 - s_cbr.backend.main - INFO - ✅ ANC 病例處理器初始化成功
2025-10-03 23:44:40 - s_cbr.SearchEngine - INFO - [SearchEngine] Connected to Weaviate
2025-10-03 23:44:40 - s_cbr.SpiralEngine - INFO - ✅ LLM 客戶端初始化成功
2025-10-03 23:44:41 - s_cbr.TextProcessor - INFO - ✅ 載入 jieba 詞典: 287 個詞條
2025-10-03 23:44:41 - s_cbr.TextProcessor - INFO -    詞典路徑: C:\work\系統-中醫\Pulse-project\Backend\anc\tcm_jieba_dict.txt
2025-10-03 23:44:41 - s_cbr.SpiralEngine - INFO - 螺旋推理引擎初始化完成
2025-10-03 23:44:41 - s_cbr.DialogManager - INFO - 對話管理器初始化完成
2025-10-03 23:44:41 - s_cbr.ConvergenceMetrics - INFO - 收斂度計算器初始化完成
2025-10-03 23:44:41 - s_cbr.SCBREngine - INFO - ✅ S-CBR Engine 初始化完成
2025-10-03 23:44:41 - s_cbr.backend.main - INFO - 🚀 TCM S-CBR Backend v2.2 啟動
2025-10-03 23:44:41 - s_cbr.backend.main - INFO - ============================================================
2025-10-03 23:44:41 - s_cbr.backend.main - INFO - 📦 已載入模組:
2025-10-03 23:44:41 - s_cbr.backend.main - INFO -    ✅ S-CBR 螺旋推理引擎
2025-10-03 23:44:41 - s_cbr.backend.main - INFO -    ✅ ANC 病例管理系統
2025-10-03 23:44:41 - s_cbr.backend.main - INFO - 
2025-10-03 23:44:41 - s_cbr.backend.main - INFO - 🔗 可用端點:
2025-10-03 23:44:41 - s_cbr.backend.main - INFO -    - 螺旋推理: /api/scbr/v2/*
2025-10-03 23:44:41 - s_cbr.backend.main - INFO -    - 病例保存: POST /api/case/save
2025-10-03 23:44:41 - s_cbr.backend.main - INFO -    - 病例查詢: GET /api/case/get/{case_id}
2025-10-03 23:44:41 - s_cbr.backend.main - INFO -    - 病例搜索: POST /api/case/search
2025-10-03 23:44:41 - s_cbr.backend.main - INFO -    - 病例統計: GET /api/case/stats
2025-10-03 23:44:41 - s_cbr.backend.main - INFO -    - 健康檢查: GET /healthz
2025-10-03 23:44:41 - s_cbr.backend.main - INFO - ============================================================
2025-10-03 23:44:42 - httpx - INFO - HTTP Request: GET http://localhost:8080/v1/meta "HTTP/1.1 200 OK"
2025-10-03 23:44:42 - httpx - INFO - HTTP Request: GET https://pypi.org/pypi/weaviate-client/json "HTTP/1.1 200 OK"
2025-10-03 23:44:42 - httpx - INFO - HTTP Request: GET http://localhost:8080/v1/schema/TCMCase "HTTP/1.1 200 OK"
2025-10-03 23:44:42 - s_cbr.backend.main - INFO - ✅ ANC 病例處理器初始化成功
2025-10-03 23:45:26 - s_cbr.SearchEngine - INFO - [SearchEngine] Connected to Weaviate
2025-10-03 23:45:26 - s_cbr.SpiralEngine - INFO - ✅ LLM 客戶端初始化成功
2025-10-03 23:45:27 - s_cbr.TextProcessor - INFO - ✅ 載入 jieba 詞典: 287 個詞條
2025-10-03 23:45:27 - s_cbr.TextProcessor - INFO -    詞典路徑: C:\work\系統-中醫\Pulse-project\Backend\anc\tcm_jieba_dict.txt
2025-10-03 23:45:27 - s_cbr.SpiralEngine - INFO - 螺旋推理引擎初始化完成
2025-10-03 23:45:27 - s_cbr.DialogManager - INFO - 對話管理器初始化完成
2025-10-03 23:45:27 - s_cbr.ConvergenceMetrics - INFO - 收斂度計算器初始化完成
2025-10-03 23:45:27 - s_cbr.SCBREngine - INFO - ✅ S-CBR Engine 初始化完成
2025-10-03 23:45:27 - s_cbr.backend.main - INFO - 🚀 TCM S-CBR Backend v2.2 啟動
2025-10-03 23:45:27 - s_cbr.backend.main - INFO - ============================================================
2025-10-03 23:45:27 - s_cbr.backend.main - INFO - 📦 已載入模組:
2025-10-03 23:45:27 - s_cbr.backend.main - INFO -    ✅ S-CBR 螺旋推理引擎
2025-10-03 23:45:27 - s_cbr.backend.main - INFO -    ✅ ANC 病例管理系統
2025-10-03 23:45:27 - s_cbr.backend.main - INFO - 
2025-10-03 23:45:27 - s_cbr.backend.main - INFO - 🔗 可用端點:
2025-10-03 23:45:27 - s_cbr.backend.main - INFO -    - 螺旋推理: /api/scbr/v2/*
2025-10-03 23:45:27 - s_cbr.backend.main - INFO -    - 病例保存: POST /api/case/save
2025-10-03 23:45:27 - s_cbr.backend.main - INFO -    - 病例查詢: GET /api/case/get/{case_id}
2025-10-03 23:45:27 - s_cbr.backend.main - INFO -    - 病例搜索: POST /api/case/search
2025-10-03 23:45:27 - s_cbr.backend.main - INFO -    - 病例統計: GET /api/case/stats
2025-10-03 23:45:27 - s_cbr.backend.main - INFO -    - 健康檢查: GET /healthz
2025-10-03 23:45:27 - s_cbr.backend.main - INFO - ============================================================
2025-10-03 23:45:28 - httpx - INFO - HTTP Request: GET http://localhost:8080/v1/meta "HTTP/1.1 200 OK"
2025-10-03 23:45:28 - httpx - INFO - HTTP Request: GET https://pypi.org/pypi/weaviate-client/json "HTTP/1.1 200 OK"
2025-10-03 23:45:28 - httpx - INFO - HTTP Request: GET http://localhost:8080/v1/schema/TCMCase "HTTP/1.1 200 OK"
2025-10-03 23:45:28 - s_cbr.backend.main - INFO - ✅ ANC 病例處理器初始化成功
2025-10-03 23:45:54 - s_cbr.SearchEngine - INFO - [SearchEngine] Connected to Weaviate
2025-10-03 23:45:54 - s_cbr.SpiralEngine - INFO - ✅ LLM 客戶端初始化成功
2025-10-03 23:45:55 - s_cbr.TextProcessor - INFO - ✅ 載入 jieba 詞典: 287 個詞條
2025-10-03 23:45:55 - s_cbr.TextProcessor - INFO -    詞典路徑: C:\work\系統-中醫\Pulse-project\Backend\anc\tcm_jieba_dict.txt
2025-10-03 23:45:55 - s_cbr.SpiralEngine - INFO - 螺旋推理引擎初始化完成
2025-10-03 23:45:55 - s_cbr.DialogManager - INFO - 對話管理器初始化完成
2025-10-03 23:45:55 - s_cbr.ConvergenceMetrics - INFO - 收斂度計算器初始化完成
2025-10-03 23:45:55 - s_cbr.SCBREngine - INFO - ✅ S-CBR Engine 初始化完成
2025-10-03 23:45:55 - s_cbr.backend.main - INFO - 🚀 TCM S-CBR Backend v2.2 啟動
2025-10-03 23:45:55 - s_cbr.backend.main - INFO - ============================================================
2025-10-03 23:45:55 - s_cbr.backend.main - INFO - 📦 已載入模組:
2025-10-03 23:45:55 - s_cbr.backend.main - INFO -    ✅ S-CBR 螺旋推理引擎
2025-10-03 23:45:55 - s_cbr.backend.main - INFO -    ✅ ANC 病例管理系統
2025-10-03 23:45:55 - s_cbr.backend.main - INFO - 
2025-10-03 23:45:55 - s_cbr.backend.main - INFO - 🔗 可用端點:
2025-10-03 23:45:55 - s_cbr.backend.main - INFO -    - 螺旋推理: /api/scbr/v2/*
2025-10-03 23:45:55 - s_cbr.backend.main - INFO -    - 病例保存: POST /api/case/save
2025-10-03 23:45:55 - s_cbr.backend.main - INFO -    - 病例查詢: GET /api/case/get/{case_id}
2025-10-03 23:45:55 - s_cbr.backend.main - INFO -    - 病例搜索: POST /api/case/search
2025-10-03 23:45:55 - s_cbr.backend.main - INFO -    - 病例統計: GET /api/case/stats
2025-10-03 23:45:55 - s_cbr.backend.main - INFO -    - 健康檢查: GET /healthz
2025-10-03 23:45:55 - s_cbr.backend.main - INFO - ============================================================
2025-10-03 23:45:56 - httpx - INFO - HTTP Request: GET http://localhost:8080/v1/meta "HTTP/1.1 200 OK"
2025-10-03 23:45:57 - httpx - INFO - HTTP Request: GET https://pypi.org/pypi/weaviate-client/json "HTTP/1.1 200 OK"
2025-10-03 23:45:57 - httpx - INFO - HTTP Request: GET http://localhost:8080/v1/schema/TCMCase "HTTP/1.1 200 OK"
2025-10-03 23:45:57 - s_cbr.backend.main - INFO - ✅ ANC 病例處理器初始化成功
2025-10-03 23:46:17 - s_cbr.SearchEngine - INFO - [SearchEngine] Connected to Weaviate
2025-10-03 23:46:17 - s_cbr.SpiralEngine - INFO - ✅ LLM 客戶端初始化成功
2025-10-03 23:46:18 - s_cbr.TextProcessor - INFO - ✅ 載入 jieba 詞典: 287 個詞條
2025-10-03 23:46:18 - s_cbr.TextProcessor - INFO -    詞典路徑: C:\work\系統-中醫\Pulse-project\Backend\anc\tcm_jieba_dict.txt
2025-10-03 23:46:18 - s_cbr.SpiralEngine - INFO - 螺旋推理引擎初始化完成
2025-10-03 23:46:18 - s_cbr.DialogManager - INFO - 對話管理器初始化完成
2025-10-03 23:46:18 - s_cbr.ConvergenceMetrics - INFO - 收斂度計算器初始化完成
2025-10-03 23:46:18 - s_cbr.SCBREngine - INFO - ✅ S-CBR Engine 初始化完成
2025-10-03 23:46:18 - s_cbr.backend.main - INFO - 🚀 TCM S-CBR Backend v2.2 啟動
2025-10-03 23:46:18 - s_cbr.backend.main - INFO - ============================================================
2025-10-03 23:46:18 - s_cbr.backend.main - INFO - 📦 已載入模組:
2025-10-03 23:46:18 - s_cbr.backend.main - INFO -    ✅ S-CBR 螺旋推理引擎
2025-10-03 23:46:18 - s_cbr.backend.main - INFO -    ✅ ANC 病例管理系統
2025-10-03 23:46:18 - s_cbr.backend.main - INFO - 
2025-10-03 23:46:18 - s_cbr.backend.main - INFO - 🔗 可用端點:
2025-10-03 23:46:18 - s_cbr.backend.main - INFO -    - 螺旋推理: /api/scbr/v2/*
2025-10-03 23:46:18 - s_cbr.backend.main - INFO -    - 病例保存: POST /api/case/save
2025-10-03 23:46:18 - s_cbr.backend.main - INFO -    - 病例查詢: GET /api/case/get/{case_id}
2025-10-03 23:46:18 - s_cbr.backend.main - INFO -    - 病例搜索: POST /api/case/search
2025-10-03 23:46:18 - s_cbr.backend.main - INFO -    - 病例統計: GET /api/case/stats
2025-10-03 23:46:18 - s_cbr.backend.main - INFO -    - 健康檢查: GET /healthz
2025-10-03 23:46:18 - s_cbr.backend.main - INFO - ============================================================
2025-10-03 23:46:18 - httpx - INFO - HTTP Request: GET http://localhost:8080/v1/meta "HTTP/1.1 200 OK"
2025-10-03 23:46:19 - httpx - INFO - HTTP Request: GET https://pypi.org/pypi/weaviate-client/json "HTTP/1.1 200 OK"
2025-10-03 23:46:19 - httpx - INFO - HTTP Request: GET http://localhost:8080/v1/schema/TCMCase "HTTP/1.1 200 OK"
2025-10-03 23:46:19 - s_cbr.backend.main - INFO - ✅ ANC 病例處理器初始化成功
